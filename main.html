<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–û—Å–Ω–æ–≤–∏ –µ–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ö–Ω—ñ–∫–∏</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #1a1a1a;
    --surface: #232323;
    --surface2: #2a2a2a;
    --surface3: #313131;
    --card: #2e2e2e;
    --accent: #5b5bd6;
    --accent-hover: #6e6ee0;
    --accent-glow: rgba(91,91,214,0.25);
    --text: #e8e8e8;
    --text-dim: #888;
    --text-muted: #555;
    --border: rgba(255,255,255,0.07);
    --icon-bg: #3a3a3a;
    --r-sm: 8px;
    --r-md: 12px;
    --r-lg: 16px;
    --font: 'JetBrains Mono', monospace;
  }

  html, body {
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: var(--bg);
    font-family: var(--font);
    color: var(--text);
  }

  .slide {
    width: 100%;
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .header {
    flex-shrink: 0;
    background: var(--surface);
    border-bottom: 1px solid var(--border);
    padding: 18px 28px;
    animation: fadeDown 0.5s ease both;
  }
  .header h1 {
    font-size: clamp(16px, 2.2vw, 24px);
    font-weight: 500;
    letter-spacing: 0.04em;
  }

  .body {
    flex: 1;
    min-height: 0;
    display: grid;
    grid-template-columns: 200px 1fr 200px;
    gap: 14px;
    padding: 14px;
  }

  .panel {
    background: var(--surface);
    border-radius: var(--r-lg);
    padding: 14px;
    border: 1px solid var(--border);
    box-shadow: 0 4px 16px rgba(0,0,0,0.35), 0 1px 3px rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
    gap: 10px;
    min-height: 0;
    animation: fadeUp 0.5s ease both;
  }
  .panel:nth-child(1) { animation-delay: 0.1s; }
  .panel:nth-child(3) { animation-delay: 0.2s; }

  .panel-title {
    flex-shrink: 0;
    font-size: 15px;
    font-weight: 600;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    text-transform: uppercase;
    text-align: center;
  }

  .panel-buttons {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 16px;
    min-height: 0;
  }

  .menu-btn {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--r-md);
    padding: 10px 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.25);
    cursor: pointer;
    transition: border-color 0.2s, transform 0.15s, box-shadow 0.2s;
    text-align: center;
    width: 100%;
    color: var(--text);
    font-family: var(--font);
    position: relative;
    overflow: hidden;
  }
  .menu-btn::after {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--accent);
    opacity: 0;
    transition: opacity 0.2s;
  }
  .menu-btn:hover {
    border-color: var(--accent);
    box-shadow: 0 0 0 1px var(--accent), 0 4px 16px var(--accent-glow);
    transform: translateY(-1px);
  }
  .menu-btn:hover::after { opacity: 0.07; }
  .menu-btn:active { transform: translateY(0); }
  .menu-btn.active {
    border-color: var(--accent);
    box-shadow: 0 0 0 1px var(--accent), 0 4px 20px var(--accent-glow);
  }

  .btn-icon {
    width: 48px;
    min-width: 48px;
    height: 48px;
    background: var(--icon-bg);
    border-radius: var(--r-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.2);
    transition: background 0.2s;
    position: relative;
    z-index: 1;
  }
  .menu-btn:hover .btn-icon { background: var(--icon-bg); border: 1px solid rgba(255,255,255,0.12); }

  .btn-label {
    font-size: clamp(12px, 1.4vw, 14px);
    font-weight: 600;
    line-height: 1.3;
    letter-spacing: 0.01em;
    position: relative;
    z-index: 1;
    text-align: center;
    width: 100%;
  }

  .center-panel {
    background: var(--surface);
    border-radius: var(--r-lg);
    border: 1px solid var(--border);
    box-shadow: 0 4px 16px rgba(0,0,0,0.35), 0 1px 3px rgba(0,0,0,0.2);
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding: 14px;
    min-height: 0;
    animation: fadeUp 0.5s ease 0.15s both;
  }
  .center-title {
    flex-shrink: 0;
    font-size: 15px;
    font-weight: 600;
    letter-spacing: 0.08em;
    color: var(--text-dim);
    text-align: center;
    text-transform: uppercase;
  }
  .phet-wrapper {
    flex: 1;
    min-height: 0;
    position: relative;
    border-radius: var(--r-md);
    overflow: hidden;
  }
  .phet-wrapper iframe {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    border: none;
  }
  .phet-frame {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, #5b5bd6 0%, #7c6fe0 50%, #6b8de0 100%);
    border-radius: var(--r-md);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    transition: transform 0.2s, box-shadow 0.2s, opacity 0.5s ease;
    z-index: 1;
  }
  .phet-frame:hover { transform: scale(1.01); box-shadow: 0 8px 32px rgba(91,91,214,0.4); }
  .phet-frame::before {
    content: '';
    position: absolute;
    inset: -200%;
    width: 400%;
    height: 400%;
    background: repeating-linear-gradient(45deg, transparent, transparent 20px, rgba(255,255,255,0.05) 20px, rgba(255,255,255,0.05) 40px);
    animation: stripeMove 3s linear infinite;
  }
  @keyframes stripeMove {
    from { transform: translate(0, 0); }
    to   { transform: translate(56px, 56px); }
  }
  .phet-label {
    font-size: 20px;
    font-weight: 700;
    color: rgba(255,255,255,0.9);
    letter-spacing: 0.1em;
    text-transform: uppercase;
    position: relative;
    z-index: 1;
    text-shadow: 0 2px 12px rgba(0,0,0,0.3);
  }

  .footer {
    flex-shrink: 0;
    background: var(--surface);
    border-top: 1px solid var(--border);
    padding: 14px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    animation: fadeUp 0.5s ease 0.3s both;
  }
  .footer-text {
    font-size: clamp(13px, 1.6vw, 16px);
    color: var(--text);
    letter-spacing: 0.02em;
  }
  .btn-next {
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: var(--r-sm);
    padding: 10px 24px;
    font-family: var(--font);
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    letter-spacing: 0.04em;
    transition: background 0.2s, transform 0.15s, box-shadow 0.2s;
    white-space: nowrap;
  }
  .btn-next:hover { background: var(--accent-hover); transform: translateY(-2px); box-shadow: 0 6px 20px var(--accent-glow); }
  .btn-next:active { transform: translateY(0); }

  .drawer {
    position: fixed;
    top: 0; bottom: 0;
    width: min(420px, 92vw);
    background: var(--surface);
    z-index: 100;
    box-shadow: 0 0 60px rgba(0,0,0,0.7);
    display: flex;
    flex-direction: column;
    transition: transform 0.4s cubic-bezier(0.32,0.72,0,1);
    overflow: hidden;
  }
  .drawer.left  { left: 0;  transform: translateX(-110%); border-right: 1px solid var(--border); }
  .drawer.right { right: 0; transform: translateX(110%);  border-left:  1px solid var(--border); }
  .drawer.open.left  { transform: translateX(0); }
  .drawer.open.right { transform: translateX(0); }

  .drawer-overlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.55);
    z-index: 99;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.35s ease;
    backdrop-filter: blur(2px);
  }
  .drawer-overlay.show { opacity: 1; pointer-events: all; }

  .drawer-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid var(--border);
    background: var(--surface2);
    flex-shrink: 0;
  }
  .drawer-title {
    font-size: 18px;
    font-weight: 700;
    letter-spacing: 0.03em;
    display: flex;
    align-items: center;
    gap: 10px;
    user-select: none;
  }
  .drawer-title .icon { font-size: 22px; }
  .drawer-close {
    width: 32px; height: 32px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--r-sm);
    color: var(--text-dim);
    font-size: 18px;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: background 0.2s, color 0.2s;
    font-family: var(--font);
  }
  .drawer-close:hover { background: var(--surface3); color: var(--text); }

  .drawer-body {
    flex: 1;
    overflow-y: auto;
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  .drawer-body::-webkit-scrollbar { width: 4px; }
  .drawer-body::-webkit-scrollbar-track { background: transparent; }
  .drawer-body::-webkit-scrollbar-thumb { background: var(--surface3); border-radius: 2px; }

  .section-block {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--r-md);
    padding: 18px 20px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    animation: fadeUp 0.4s ease both;
  }
  .section-block:nth-child(1) { animation-delay: 0.05s; }
  .section-block:nth-child(2) { animation-delay: 0.12s; }
  .section-block:nth-child(3) { animation-delay: 0.19s; }

  .section-label {
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--accent);
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .section-label::before {
    content: '';
    width: 14px; height: 2px;
    background: var(--accent);
    border-radius: 1px;
    flex-shrink: 0;
  }

  .section-text { font-size: 13px; line-height: 1.75; color: #c4c4c4; letter-spacing: 0.01em; }

  .formula-box {
    background: var(--surface);
    border: 1px solid var(--accent);
    border-radius: var(--r-sm);
    padding: 14px 18px;
    text-align: center;
    box-shadow: 0 0 20px var(--accent-glow);
  }
  .formula { font-size: clamp(18px, 3vw, 24px); font-weight: 700; letter-spacing: 0.1em; margin-bottom: 8px; user-select: none; }
  .formula-desc { font-size: 11px; color: var(--text-dim); line-height: 1.6; letter-spacing: 0.03em; }

  .task-block {
    background: rgba(91,91,214,0.08);
    border: 1px solid rgba(91,91,214,0.3);
    border-radius: var(--r-md);
    padding: 18px 20px;
    display: flex;
    flex-direction: column;
    gap: 14px;
    animation: fadeUp 0.4s ease 0.26s both;
  }
  .task-label { font-size: 13px; font-weight: 700; letter-spacing: 0.15em; text-transform: uppercase; color: #8b8be8; }
  .task-text { font-size: 14px; line-height: 1.7; color: #c4c4c4; }
  .task-inputs { display: flex; flex-direction: column; gap: 12px; }
  .input-row { display: flex; align-items: center; gap: 10px; overflow: visible; }
  .input-row label { font-size: 14px; color: var(--text-dim); min-width: 60px; flex-shrink: 0; letter-spacing: 0.02em; }
  .task-input {
    flex: 1;
    min-width: 0;
    background: var(--surface);
    border: 1.5px solid rgba(255,255,255,0.15);
    border-radius: var(--r-sm);
    padding: 11px 14px;
    color: var(--text);
    font-family: var(--font);
    font-size: 15px;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
  }
  .task-input:focus { border-color: var(--accent); box-shadow: 0 0 0 2px var(--accent-glow); }
  .task-input::-webkit-outer-spin-button,
  .task-input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
  .task-input[type=number] { -moz-appearance: textfield; }
  .task-unit { font-size: 14px; color: var(--text-dim); min-width: 24px; padding-right: 4px; }
  .task-check {
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: var(--r-sm);
    padding: 11px 24px;
    font-family: var(--font);
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    letter-spacing: 0.06em;
    transition: background 0.2s, transform 0.15s, box-shadow 0.2s;
    align-self: stretch;
    box-shadow: 0 2px 12px var(--accent-glow);
  }
  .task-check:hover { background: var(--accent-hover); transform: translateY(-1px); box-shadow: 0 4px 20px var(--accent-glow); }
  .task-result { font-size: 13px; padding: 10px 14px; border-radius: var(--r-sm); display: none; letter-spacing: 0.02em; line-height: 1.5; }
  .task-result.correct { display: block; background: rgba(52,199,89,0.12); border: 1px solid rgba(52,199,89,0.3); color: #5fd87b; }
  .task-result.wrong   { display: block; background: rgba(255,69,58,0.1);  border: 1px solid rgba(255,69,58,0.3);  color: #ff6b6b; }

  @keyframes fadeDown { from { opacity:0; transform:translateY(-12px); } to { opacity:1; transform:translateY(0); } }
  @keyframes fadeUp   { from { opacity:0; transform:translateY(16px);  } to { opacity:1; transform:translateY(0); } }

  /* ‚îÄ‚îÄ Quiz Screen ‚îÄ‚îÄ */
  .quiz-screen {
    display: none;
    width: 100%;
    height: 100vh;
    flex-direction: column;
    overflow: hidden;
    position: fixed;
    inset: 0;
    background: var(--bg);
    z-index: 200;
  }
  .quiz-screen.active { display: flex; }

  .quiz-body {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    padding: 24px 32px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    align-content: center;
  }
  .quiz-body::-webkit-scrollbar { width: 4px; }
  .quiz-body::-webkit-scrollbar-thumb { background: var(--surface3); border-radius: 2px; }

  .quiz-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--r-lg);
    padding: 20px 22px;
    display: flex;
    flex-direction: column;
    gap: 14px;
    animation: fadeUp 0.4s ease both;
  }
  .quiz-card:nth-child(1) { animation-delay: 0.05s; }
  .quiz-card:nth-child(2) { animation-delay: 0.10s; }
  .quiz-card:nth-child(3) { animation-delay: 0.15s; }
  .quiz-card:nth-child(4) { animation-delay: 0.20s; }
  .quiz-card:nth-child(5) { animation-delay: 0.25s; }
  .quiz-card:nth-child(6) { animation-delay: 0.30s; }

  .quiz-num {
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--accent);
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .quiz-num::before { content: ''; width: 14px; height: 2px; background: var(--accent); border-radius: 1px; }

  .quiz-question {
    font-size: 14px;
    line-height: 1.6;
    color: var(--text);
    font-weight: 500;
  }

  .quiz-options {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .quiz-option {
    display: flex;
    align-items: center;
    gap: 10px;
    background: var(--card);
    border: 1.5px solid var(--border);
    border-radius: var(--r-sm);
    padding: 10px 14px;
    cursor: pointer;
    transition: border-color 0.2s, background 0.2s, transform 0.15s;
    font-family: var(--font);
    font-size: 13px;
    color: var(--text);
    text-align: left;
    width: 100%;
  }
  .quiz-option:hover { border-color: var(--accent); background: rgba(91,91,214,0.08); transform: translateX(2px); }
  .quiz-option.selected { border-color: var(--accent); background: rgba(91,91,214,0.15); box-shadow: 0 0 0 1px var(--accent); }
  .quiz-option.correct  { border-color: #34c759; background: rgba(52,199,89,0.12); color: #5fd87b; }
  .quiz-option.wrong    { border-color: #ff453a; background: rgba(255,69,58,0.10); color: #ff6b6b; }
  .quiz-option.reveal-correct { border-color: #34c759; background: rgba(52,199,89,0.08); color: #5fd87b; }
  .quiz-option:disabled { cursor: default; transform: none; }

  .quiz-option-key {
    width: 24px; height: 24px;
    min-width: 24px;
    background: var(--surface3);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0;
    color: var(--text-dim);
    transition: background 0.2s, color 0.2s;
  }
  .quiz-option.selected .quiz-option-key { background: var(--accent); color: #fff; }
  .quiz-option.correct .quiz-option-key  { background: #34c759; color: #fff; }
  .quiz-option.wrong .quiz-option-key    { background: #ff453a; color: #fff; }
  .quiz-option.reveal-correct .quiz-option-key { background: #34c759; color: #fff; }

  .quiz-result-banner {
    display: none;
    padding: 10px 14px;
    border-radius: var(--r-sm);
    font-size: 13px;
    line-height: 1.5;
    letter-spacing: 0.02em;
  }
  .quiz-result-banner.correct { display: block; background: rgba(52,199,89,0.12); border: 1px solid rgba(52,199,89,0.3); color: #5fd87b; }
  .quiz-result-banner.wrong   { display: block; background: rgba(255,69,58,0.10);  border: 1px solid rgba(255,69,58,0.3);  color: #ff6b6b; }

  @media (max-width: 760px) {
    .quiz-body { grid-template-columns: 1fr; padding: 16px; }
  }

  /* ‚îÄ‚îÄ Topic Picker Modal ‚îÄ‚îÄ */
  .modal-overlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.6);
    z-index: 300;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    backdrop-filter: blur(3px);
  }
  .modal-overlay.show { opacity: 1; pointer-events: all; }

  .topic-modal {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -44%) scale(0.95);
    width: min(480px, 92vw);
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--r-lg);
    box-shadow: 0 24px 80px rgba(0,0,0,0.6);
    z-index: 301;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease, transform 0.3s cubic-bezier(0.32,0.72,0,1);
    overflow: hidden;
  }
  .topic-modal.show {
    opacity: 1;
    pointer-events: all;
    transform: translate(-50%, -50%) scale(1);
  }

  .modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid var(--border);
    background: var(--surface2);
  }

  .modal-body {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .topic-btn {
    display: flex;
    align-items: center;
    gap: 16px;
    background: var(--card);
    border: 1.5px solid var(--border);
    border-radius: var(--r-md);
    padding: 14px 18px;
    cursor: pointer;
    transition: border-color 0.2s, transform 0.15s, box-shadow 0.2s, background 0.2s;
    text-align: left;
    width: 100%;
    color: var(--text);
    font-family: var(--font);
    animation: fadeUp 0.3s ease both;
  }
  .topic-btn:nth-child(1) { animation-delay: 0.05s; }
  .topic-btn:nth-child(2) { animation-delay: 0.10s; }
  .topic-btn:nth-child(3) { animation-delay: 0.15s; }
  .topic-btn:nth-child(4) { animation-delay: 0.20s; }
  .topic-btn:nth-child(5) { animation-delay: 0.25s; }
  .topic-btn:hover {
    border-color: var(--accent);
    background: rgba(91,91,214,0.08);
    box-shadow: 0 0 0 1px var(--accent), 0 4px 16px var(--accent-glow);
    transform: translateX(3px);
  }

  .topic-icon {
    font-size: 22px;
    width: 36px;
    min-width: 36px;
    max-width: 36px;
    text-align: left;
    overflow: hidden;
    white-space: nowrap;
  }

  .topic-name {
    font-size: 14px;
    font-weight: 600;
    letter-spacing: 0.02em;
    margin-bottom: 3px;
  }

  .topic-desc {
    font-size: 12px;
    color: var(--text-dim);
    letter-spacing: 0.02em;
  }

  @media (max-width: 760px) {
    html, body { overflow-y: auto; }
    .slide { height: auto; min-height: 100vh; }
    .body { grid-template-columns: 1fr; height: auto; }
    .center-panel { order: -1; min-height: 240px; }
    .panel.left-panel  { order: 0; }
    .panel.right-panel { order: 1; }
    .panel-buttons { min-height: 180px; }
    .drawer { width: 100vw; }
    .drawer.left, .drawer.right { left: 0; right: 0; top: auto; bottom: 0; height: 85vh; transform: translateY(110%); border: none; border-top: 1px solid var(--border); border-radius: var(--r-lg) var(--r-lg) 0 0; }
    .drawer.open.left, .drawer.open.right { transform: translateY(0); }
  }
  @media (max-width: 520px) {
    .header { padding: 14px 16px; }
    .footer { flex-direction: column; align-items: flex-start; gap: 12px; }
    .btn-next { width: 100%; text-align: center; }
    .body { padding: 10px; gap: 10px; }
  }
</style>
</head>
<body>

<div class="slide">
  <div class="header">
    <h1>–û—Å–Ω–æ–≤–∏ –µ–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ö–Ω—ñ–∫–∏: –í—ñ–¥ —Ñ—ñ–∑–∏–∫–∏ –¥–æ –ª–æ–≥—ñ–∫–∏</h1>
  </div>

  <div class="body">
    <!-- LEFT -->
    <div class="panel left-panel">
      <div class="panel-title">–¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∞ –±–∞–∑–∞</div>
      <div class="panel-buttons">
        <button class="menu-btn" onclick="openDrawer('ohm','left',event)">
          <div class="btn-icon">‚ö°</div>
          <span class="btn-label">–ó–∞–∫–æ–Ω –û–º–∞</span>
        </button>
        <button class="menu-btn" onclick="openDrawer('kirchhoff','left',event)">
          <div class="btn-icon">üîÄ</div>
          <span class="btn-label">–ó–∞–∫–æ–Ω –ö—ñ—Ä—Ö–≥–æ—Ñ–∞</span>
        </button>
        <button class="menu-btn" onclick="openDrawer('power','left',event)">
          <div class="btn-icon">üí°</div>
          <span class="btn-label">–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å —Å—Ç—Ä—É–º—É</span>
        </button>
      </div>
    </div>

    <!-- CENTER -->
    <div class="center-panel">
      <div class="center-title">–í—ñ—Ä—Ç—É–∞–ª—å–Ω–∞ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä—ñ—è (pHet)</div>
      <div class="phet-wrapper">
        <iframe id="phet-iframe" src="" allow="fullscreen"></iframe>
        <div class="phet-frame" id="phet-frame" onclick="launchSim()">
          <span class="phet-label">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∏–º—É–ª—è—Ü—ñ—é</span>
        </div>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="panel right-panel">
      <div class="panel-title">–ê–ø–∞—Ä–∞—Ç–Ω–∞ –ª–æ–≥—ñ–∫–∞</div>
      <div class="panel-buttons">
        <button class="menu-btn" onclick="openDrawer('and','right',event)">
          <div class="btn-icon">üî≤</div>
          <span class="btn-label">–í–µ–Ω—Ç–∏–ª—å AND</span>
        </button>
        <button class="menu-btn" onclick="openDrawer('or','right',event)">
          <div class="btn-icon">üîÅ</div>
          <span class="btn-label">–í–µ–Ω—Ç–∏–ª—å OR</span>
        </button>
        <button class="menu-btn" onclick="openDrawer('trigger','right',event)">
          <div class="btn-icon">üîÑ</div>
          <span class="btn-label">–¢—Ä–∏–≥–µ—Ä</span>
        </button>
      </div>
    </div>
  </div>

  <div class="footer">
    <span class="footer-text" id="footer-text">–û–∑–Ω–∞–π–æ–º—Ç–µ—Å—å —ñ–∑ —Ç–µ–æ—Ä—ñ—î—é –∞–±–æ –ø–æ—á–Ω—ñ—Ç—å –ø—Ä–∞–∫—Ç–∏—á–Ω–∏–π –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç</span>
    <button class="btn-next" onclick="showQuiz()">–î–∞–ª—ñ ‚Üí</button>
  </div>
</div>

<!-- QUIZ SCREEN -->
<div class="quiz-screen" id="quiz-screen">
  <div class="header">
    <h1>–ü—ñ–¥—Å—É–º–∫–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è: –ó–∞–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è –∑–Ω–∞–Ω—å</h1>
  </div>
  <div class="quiz-body" id="quiz-body"></div>
  <div class="footer">
    <button class="btn-next" onclick="showMain()">‚Üê –ù–∞–∑–∞–¥</button>
    <div style="display:flex;gap:10px;align-items:center">
      <span class="footer-text" id="quiz-score"></span>
      <button class="btn-next" id="quiz-submit" onclick="submitQuiz()">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ ‚Üí</button>
    </div>
  </div>
</div>

<!-- TOPIC PICKER MODAL -->
<div class="modal-overlay" id="modal-overlay" onclick="closeModal()"></div>
<div class="topic-modal" id="topic-modal">
  <div class="modal-header">
    <div class="drawer-title">üéØ –û–±–µ—Ä—ñ—Ç—å —Ç–µ–º—É –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è</div>
    <button class="drawer-close" onclick="closeModal()">‚úï</button>
  </div>
  <div class="modal-body">
    <button class="topic-btn" onclick="startQuiz('all')">
      <span class="topic-icon">üìö</span>
      <div><div class="topic-name">–í—Å—ñ —Ç–µ–º–∏</div><div class="topic-desc">6 –ø–∏—Ç–∞–Ω—å ‚Äî –ø–æ–≤–Ω–µ –∑–∞–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è</div></div>
    </button>
    <button class="topic-btn" onclick="startQuiz('electricity')">
      <span class="topic-icon">‚ö°</span>
      <div><div class="topic-name">–ó–∞–∫–æ–Ω –û–º–∞</div><div class="topic-desc">–ù–∞–ø—Ä—É–≥–∞, —Å—Ç—Ä—É–º, –æ–ø—ñ—Ä</div></div>
    </button>
    <button class="topic-btn" onclick="startQuiz('kirchhoff')">
      <span class="topic-icon">üîÄ</span>
      <div><div class="topic-name">–ó–∞–∫–æ–Ω –ö—ñ—Ä—Ö–≥–æ—Ñ–∞</div><div class="topic-desc">–í—É–∑–ª–∏ —Ç–∞ –∫–æ–Ω—Ç—É—Ä–∏</div></div>
    </button>
    <button class="topic-btn" onclick="startQuiz('power')">
      <span class="topic-icon">üí°</span>
      <div><div class="topic-name">–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å —Å—Ç—Ä—É–º—É</div><div class="topic-desc">P = U¬∑I —Ç–∞ P = I¬≤¬∑R</div></div>
    </button>
    <button class="topic-btn" onclick="startQuiz('logic')">
      <span class="topic-icon">üî≤üîÅüîÑ</span>
      <div><div class="topic-name">–ê–ø–∞—Ä–∞—Ç–Ω–∞ –ª–æ–≥—ñ–∫–∞</div><div class="topic-desc">AND, OR, –¢—Ä–∏–≥–µ—Ä</div></div>
    </button>
  </div>
</div>

<div class="drawer-overlay" id="overlay" onclick="closeDrawer()"></div>

<div class="drawer left" id="drawer-left">
  <div class="drawer-header">
    <div class="drawer-title" id="title-left"></div>
    <button class="drawer-close" onclick="closeDrawer()">‚úï</button>
  </div>
  <div class="drawer-body" id="body-left"></div>
</div>

<div class="drawer right" id="drawer-right">
  <div class="drawer-header">
    <div class="drawer-title" id="title-right"></div>
    <button class="drawer-close" onclick="closeDrawer()">‚úï</button>
  </div>
  <div class="drawer-body" id="body-right"></div>
</div>

<script>
const CONTENT = {
  ohm: {
    title: '<span class="icon">‚ö°</span> –ó–∞–∫–æ–Ω –û–º–∞',
    html: `
      <div class="section-block">
        <div class="section-label">–¢–µ–æ—Ä—ñ—è</div>
        <div class="section-text">
          –ó–∞–∫–æ–Ω –û–º–∞ ‚Äî —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∏–π –∑–∞–∫–æ–Ω –µ–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ö–Ω—ñ–∫–∏, —â–æ –æ–ø–∏—Å—É—î –∑–≤'—è–∑–æ–∫ –º—ñ–∂ –Ω–∞–ø—Ä—É–≥–æ—é, —Å—Ç—Ä—É–º–æ–º —Ç–∞ –æ–ø–æ—Ä–æ–º —É –ø—Ä–æ–≤—ñ–¥–Ω–∏–∫—É.<br><br>
          –ß–∏–º –±—ñ–ª—å—à–∏–π –æ–ø—ñ—Ä –º–∞—Ç–µ—Ä—ñ–∞–ª—É ‚Äî —Ç–∏–º –º–µ–Ω—à–∏–π —Å—Ç—Ä—É–º –ø—Ä–æ—Ç—ñ–∫–∞—î –ø—Ä–∏ —Ç—ñ–π —Å–∞–º—ñ–π –Ω–∞–ø—Ä—É–∑—ñ. –°–∞–º–µ —Ü–µ–π –ø—Ä–∏–Ω—Ü–∏–ø –ª–µ–∂–∏—Ç—å –≤ –æ—Å–Ω–æ–≤—ñ –±—É–¥—å-—è–∫–æ—ó –µ–ª–µ–∫—Ç—Ä–∏—á–Ω–æ—ó —Å—Ö–µ–º–∏: –≤—ñ–¥ –∑–∞—Ä—è–¥–∫–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É –¥–æ –ø—Ä–æ—Ü–µ—Å–æ—Ä—ñ–≤.
        </div>
      </div>
      <div class="section-block">
        <div class="section-label">–§–æ—Ä–º—É–ª–∞</div>
        <div class="formula-box">
          <div class="formula">I = U / R</div>
          <div class="formula-desc">I ‚Äî —Å–∏–ª–∞ —Å—Ç—Ä—É–º—É (–ê) &nbsp;¬∑&nbsp; U ‚Äî –Ω–∞–ø—Ä—É–≥–∞ (–í) &nbsp;¬∑&nbsp; R ‚Äî –æ–ø—ñ—Ä (–û–º)</div>
        </div>
      </div>
      <div class="task-block">
        <div class="task-label">üß™ –ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è</div>
        <div class="task-text">–£ –∫–æ–ª—ñ –Ω–∞–ø—Ä—É–≥–∞ <strong style="color:#e8e8e8">U = 12 –í</strong>, –æ–ø—ñ—Ä —Ä–µ–∑–∏—Å—Ç–æ—Ä–∞ <strong style="color:#e8e8e8">R = 4 –û–º</strong>. –†–æ–∑—Ä–∞—Ö—É–π —Å–∏–ª—É —Å—Ç—Ä—É–º—É.</div>
        <div class="task-inputs">
          <div class="input-row">
            <label>–í—ñ–¥–ø–æ–≤—ñ–¥—å:</label>
            <input class="task-input" type="number" id="ohm-ans" placeholder="0.00">
            <span class="task-unit">–ê</span>
          </div>
          <button class="task-check" onclick="check('ohm-ans',3,'ohm-res')">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
          <div class="task-result" id="ohm-res"></div>
        </div>
      </div>`
  },
  kirchhoff: {
    title: '<span class="icon">üîÄ</span> –ó–∞–∫–æ–Ω –ö—ñ—Ä—Ö–≥–æ—Ñ–∞',
    html: `
      <div class="section-block">
        <div class="section-label">–¢–µ–æ—Ä—ñ—è</div>
        <div class="section-text">
          –ö—ñ—Ä—Ö–≥–æ—Ñ —Å—Ñ–æ—Ä–º—É–ª—é–≤–∞–≤ –¥–≤–∞ –∑–∞–∫–æ–Ω–∏ –¥–ª—è —Ä–æ–∑–≥–∞–ª—É–∂–µ–Ω–∏—Ö –∫—ñ–ª.<br><br>
          <strong style="color:#e8e8e8">1-–π –∑–∞–∫–æ–Ω (–≤—É–∑–ª—ñ–≤):</strong> —Å—É–º–∞ —Å—Ç—Ä—É–º—ñ–≤ —É –≤—É–∑–ª—ñ –¥–æ—Ä—ñ–≤–Ω—é—î –Ω—É–ª—é. –°–∫—ñ–ª—å–∫–∏ –ø—Ä–∏–π—à–ª–æ ‚Äî —Å—Ç—ñ–ª—å–∫–∏ –π –ø—ñ—à–ª–æ.<br><br>
          <strong style="color:#e8e8e8">2-–π –∑–∞–∫–æ–Ω (–∫–æ–Ω—Ç—É—Ä—ñ–≤):</strong> –∞–ª–≥–µ–±—Ä–∞—ó—á–Ω–∞ —Å—É–º–∞ –Ω–∞–ø—Ä—É–≥ —É –∑–∞–º–∫–Ω–µ–Ω–æ–º—É –∫–æ–Ω—Ç—É—Ä—ñ –¥–æ—Ä—ñ–≤–Ω—é—î –Ω—É–ª—é.
        </div>
      </div>
      <div class="section-block">
        <div class="section-label">–§–æ—Ä–º—É–ª–∏</div>
        <div class="formula-box">
          <div class="formula">Œ£I = 0</div>
          <div class="formula-desc" style="margin-bottom:10px">–ü–µ—Ä—à–∏–π –∑–∞–∫–æ–Ω: –≤—É–∑–ª–æ–≤–∏–π</div>
          <div class="formula">Œ£U = 0</div>
          <div class="formula-desc">–î—Ä—É–≥–∏–π –∑–∞–∫–æ–Ω: –∫–æ–Ω—Ç—É—Ä–Ω–∏–π</div>
        </div>
      </div>
      <div class="task-block">
        <div class="task-label">üß™ –ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è</div>
        <div class="task-text">–£ –≤—É–∑–æ–ª –≤—Ö–æ–¥—è—Ç—å <strong style="color:#e8e8e8">I‚ÇÅ = 3 –ê</strong> —Ç–∞ <strong style="color:#e8e8e8">I‚ÇÇ = 5 –ê</strong>. –ó–Ω–∞–π–¥–∏ I‚ÇÉ —â–æ –≤–∏—Ö–æ–¥–∏—Ç—å.</div>
        <div class="task-inputs">
          <div class="input-row">
            <label>I‚ÇÉ =</label>
            <input class="task-input" type="number" id="kir-ans" placeholder="0">
            <span class="task-unit">–ê</span>
          </div>
          <button class="task-check" onclick="check('kir-ans',8,'kir-res')">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
          <div class="task-result" id="kir-res"></div>
        </div>
      </div>`
  },
  power: {
    title: '<span class="icon">üí°</span> –ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å —Å—Ç—Ä—É–º—É',
    html: `
      <div class="section-block">
        <div class="section-label">–¢–µ–æ—Ä—ñ—è</div>
        <div class="section-text">
          –ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å ‚Äî —Ü–µ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–Ω–µ—Ä–≥—ñ—ó, —â–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –≤ –∫–æ–ª—ñ –∑–∞ –æ–¥–∏–Ω–∏—Ü—é —á–∞—Å—É. –í–æ–Ω–∞ –≤–∏–∑–Ω–∞—á–∞—î, —Å–∫—ñ–ª—å–∫–∏ —Ç–µ–ø–ª–∞ –≤–∏–¥—ñ–ª—è—î —Ä–µ–∑–∏—Å—Ç–æ—Ä –∞–±–æ —Å–∫—ñ–ª—å–∫–∏ —Å–≤—ñ—Ç–ª–∞ –¥–∞—î –ª–∞–º–ø–∞.<br><br>
          –ß–∏–º –≤–∏—â–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å ‚Äî —Ç–∏–º –±—ñ–ª—å—à–µ –µ–Ω–µ—Ä–≥—ñ—ó —Å–ø–æ–∂–∏–≤–∞—î –ø—Ä–∏—Å—Ç—Ä—ñ–π –∑–∞ —Å–µ–∫—É–Ω–¥—É.
        </div>
      </div>
      <div class="section-block">
        <div class="section-label">–§–æ—Ä–º—É–ª–∏</div>
        <div class="formula-box">
          <div class="formula">P = U ¬∑ I</div>
          <div class="formula-desc" style="margin-bottom:10px">P ‚Äî –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å (–í—Ç) &nbsp;¬∑&nbsp; U ‚Äî –Ω–∞–ø—Ä—É–≥–∞ (–í) &nbsp;¬∑&nbsp; I ‚Äî —Å—Ç—Ä—É–º (–ê)</div>
          <div class="formula">P = I¬≤ ¬∑ R</div>
          <div class="formula-desc">–ß–µ—Ä–µ–∑ –æ–ø—ñ—Ä —Ç–∞ —Å—Ç—Ä—É–º</div>
        </div>
      </div>
      <div class="task-block">
        <div class="task-label">üß™ –ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è</div>
        <div class="task-text">–ß–µ—Ä–µ–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä <strong style="color:#e8e8e8">R = 10 –û–º</strong> –ø—Ä–æ—Ç—ñ–∫–∞—î <strong style="color:#e8e8e8">I = 2 –ê</strong>. –†–æ–∑—Ä–∞—Ö—É–π –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å.</div>
        <div class="task-inputs">
          <div class="input-row">
            <label>P =</label>
            <input class="task-input" type="number" id="pow-ans" placeholder="0">
            <span class="task-unit">–í—Ç</span>
          </div>
          <button class="task-check" onclick="check('pow-ans',40,'pow-res')">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
          <div class="task-result" id="pow-res"></div>
        </div>
      </div>`
  },
  and: {
    title: '<span class="icon">üî≤</span> –í–µ–Ω—Ç–∏–ª—å AND',
    html: `
      <div class="section-block">
        <div class="section-label">–¢–µ–æ—Ä—ñ—è</div>
        <div class="section-text">
          AND-–≤–µ–Ω—Ç–∏–ª—å –¥–∞—î ¬´1¬ª –Ω–∞ –≤–∏—Ö–æ–¥—ñ –ª–∏—à–µ —Ç–æ–¥—ñ, –∫–æ–ª–∏ <strong style="color:#e8e8e8">–≤—Å—ñ</strong> –≤—Ö–æ–¥–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ ¬´1¬ª.<br><br>
          –ê–Ω–∞–ª–æ–≥ ‚Äî –¥–≤–∞ –≤–∏–º–∏–∫–∞—á—ñ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ: –ª–∞–º–ø–∞ –≥–æ—Ä–∏—Ç—å —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –æ–±–∏–¥–≤–∞ –≤–≤—ñ–º–∫–Ω–µ–Ω—ñ. –í —Å—Ö–µ–º–∞—Ö AND —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞–º–∏ —É –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–º—É –∑'—î–¥–Ω–∞–Ω–Ω—ñ.
        </div>
      </div>
      <div class="section-block">
        <div class="section-label">–¢–∞–±–ª–∏—Ü—è —ñ—Å—Ç–∏–Ω–Ω–æ—Å—Ç—ñ</div>
        <div class="formula-box">
          <div class="formula">Y = A ¬∑ B</div>
          <div class="formula-desc">0¬∑0=0 &nbsp;|&nbsp; 0¬∑1=0 &nbsp;|&nbsp; 1¬∑0=0 &nbsp;|&nbsp; 1¬∑1=1</div>
        </div>
      </div>
      <div class="task-block">
        <div class="task-label">üß™ –ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è</div>
        <div class="task-text">–ù–∞ AND-–≤–µ–Ω—Ç–∏–ª—å –ø–æ–¥–∞–Ω–æ <strong style="color:#e8e8e8">A = 1</strong> —Ç–∞ <strong style="color:#e8e8e8">B = 0</strong>. –ß–æ–º—É –¥–æ—Ä—ñ–≤–Ω—é—î Y?</div>
        <div class="task-inputs">
          <div class="input-row">
            <label>Y =</label>
            <input class="task-input" type="number" id="and-ans" placeholder="0 –∞–±–æ 1" min="0" max="1">
            <span class="task-unit"></span>
          </div>
          <button class="task-check" onclick="check('and-ans',0,'and-res')">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
          <div class="task-result" id="and-res"></div>
        </div>
      </div>`
  },
  or: {
    title: '<span class="icon">üîÅ</span> –í–µ–Ω—Ç–∏–ª—å OR',
    html: `
      <div class="section-block">
        <div class="section-label">–¢–µ–æ—Ä—ñ—è</div>
        <div class="section-text">
          OR-–≤–µ–Ω—Ç–∏–ª—å –¥–∞—î ¬´1¬ª, —è–∫—â–æ <strong style="color:#e8e8e8">—Ö–æ—á–∞ –± –æ–¥–∏–Ω</strong> –≤—Ö—ñ–¥ ¬´1¬ª. ¬´0¬ª ‚Äî –ª–∏—à–µ –∫–æ–ª–∏ –≤—Å—ñ –≤—Ö–æ–¥–∏ ¬´0¬ª.<br><br>
          –ê–Ω–∞–ª–æ–≥ ‚Äî –¥–≤–∞ –≤–∏–º–∏–∫–∞—á—ñ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ: –ª–∞–º–ø–∞ –≥–æ—Ä–∏—Ç—å —è–∫—â–æ —Ö–æ—á–∞ –± –æ–¥–∏–Ω –≤–≤—ñ–º–∫–Ω–µ–Ω–∏–π.
        </div>
      </div>
      <div class="section-block">
        <div class="section-label">–¢–∞–±–ª–∏—Ü—è —ñ—Å—Ç–∏–Ω–Ω–æ—Å—Ç—ñ</div>
        <div class="formula-box">
          <div class="formula">Y = A + B</div>
          <div class="formula-desc">0+0=0 &nbsp;|&nbsp; 0+1=1 &nbsp;|&nbsp; 1+0=1 &nbsp;|&nbsp; 1+1=1</div>
        </div>
      </div>
      <div class="task-block">
        <div class="task-label">üß™ –ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è</div>
        <div class="task-text">–ù–∞ OR-–≤–µ–Ω—Ç–∏–ª—å –ø–æ–¥–∞–Ω–æ <strong style="color:#e8e8e8">A = 0</strong> —Ç–∞ <strong style="color:#e8e8e8">B = 0</strong>. –í–∏–∑–Ω–∞—á Y.</div>
        <div class="task-inputs">
          <div class="input-row">
            <label>Y =</label>
            <input class="task-input" type="number" id="or-ans" placeholder="0 –∞–±–æ 1" min="0" max="1">
            <span class="task-unit"></span>
          </div>
          <button class="task-check" onclick="check('or-ans',0,'or-res')">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
          <div class="task-result" id="or-res"></div>
        </div>
      </div>`
  },
  trigger: {
    title: '<span class="icon">üîÑ</span> –¢—Ä–∏–≥–µ—Ä',
    html: `
      <div class="section-block">
        <div class="section-label">–¢–µ–æ—Ä—ñ—è</div>
        <div class="section-text">
          –¢—Ä–∏–≥–µ—Ä ‚Äî –µ–ª–µ–º–µ–Ω—Ç –ø–∞–º'—è—Ç—ñ —Ü–∏—Ñ—Ä–æ–≤–æ—ó –µ–ª–µ–∫—Ç—Ä–æ–Ω—ñ–∫–∏. –í—ñ–Ω <strong style="color:#e8e8e8">–∑–±–µ—Ä—ñ–≥–∞—î —Å—Ç–∞–Ω</strong> (0 –∞–±–æ 1) –ø—ñ—Å–ª—è –∑–Ω–∏–∫–Ω–µ–Ω–Ω—è –≤—Ö—ñ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª—É.<br><br>
          RS-—Ç—Ä–∏–≥–µ—Ä: S (Set) –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î ¬´1¬ª, R (Reset) —Å–∫–∏–¥–∞—î –≤ ¬´0¬ª. –¢—Ä–∏–≥–µ—Ä–∏ ‚Äî –æ—Å–Ω–æ–≤–∞ —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤, –ª—ñ—á–∏–ª—å–Ω–∏–∫—ñ–≤ —Ç–∞ RAM.
        </div>
      </div>
      <div class="section-block">
        <div class="section-label">RS-—Ç—Ä–∏–≥–µ—Ä</div>
        <div class="formula-box">
          <div class="formula">Q(t+1) = S + Q¬∑RÃÑ</div>
          <div class="formula-desc">S=1, R=0 ‚Üí Q=1 &nbsp;|&nbsp; S=0, R=1 ‚Üí Q=0 &nbsp;|&nbsp; S=0, R=0 ‚Üí Q –±–µ–∑ –∑–º—ñ–Ω</div>
        </div>
      </div>
      <div class="task-block">
        <div class="task-label">üß™ –ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è</div>
        <div class="task-text">–¢—Ä–∏–≥–µ—Ä —É —Å—Ç–∞–Ω—ñ <strong style="color:#e8e8e8">Q = 0</strong>. –ü–æ–¥–∞—î–º–æ <strong style="color:#e8e8e8">S = 1</strong>, <strong style="color:#e8e8e8">R = 0</strong>. –ù–æ–≤–∏–π —Å—Ç–∞–Ω Q?</div>
        <div class="task-inputs">
          <div class="input-row">
            <label>Q =</label>
            <input class="task-input" type="number" id="tr-ans" placeholder="0 –∞–±–æ 1" min="0" max="1">
            <span class="task-unit"></span>
          </div>
          <button class="task-check" onclick="check('tr-ans',1,'tr-res')">–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏</button>
          <div class="task-result" id="tr-res"></div>
        </div>
      </div>`
  }
};

let currentDrawer = null;

function openDrawer(key, side, e) {
  const data = CONTENT[key];
  if (!data) return;
  closeDrawer(true);
  const drawer  = document.getElementById('drawer-' + side);
  const titleEl = document.getElementById('title-' + side);
  const bodyEl  = document.getElementById('body-' + side);
  titleEl.innerHTML = data.title;
  bodyEl.innerHTML  = data.html;
  document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
  e.currentTarget.classList.add('active');
  document.getElementById('footer-text').textContent = data.title.replace(/<[^>]+>/g,'').trim();
  requestAnimationFrame(() => {
    document.getElementById('overlay').classList.add('show');
    drawer.classList.add('open');
  });
  currentDrawer = { drawer, side };
}

function closeDrawer(silent = false) {
  document.getElementById('drawer-left').classList.remove('open');
  document.getElementById('drawer-right').classList.remove('open');
  document.getElementById('overlay').classList.remove('show');
  document.querySelectorAll('.menu-btn').forEach(b => b.classList.remove('active'));
  if (!silent) document.getElementById('footer-text').textContent = '–û–∑–Ω–∞–π–æ–º—Ç–µ—Å—å —ñ–∑ —Ç–µ–æ—Ä—ñ—î—é –∞–±–æ –ø–æ—á–Ω—ñ—Ç—å –ø—Ä–∞–∫—Ç–∏—á–Ω–∏–π –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç';
  currentDrawer = null;
}

function check(inputId, correct, resultId) {
  const val = parseFloat(document.getElementById(inputId).value);
  const res = document.getElementById(resultId);
  if (isNaN(val)) { res.className = 'task-result wrong'; res.textContent = '‚ö† –í–≤–µ–¥–∏ —á–∏—Å–ª–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è'; return; }
  if (Math.abs(val - correct) < 0.01) { res.className = 'task-result correct'; res.textContent = `‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –í—ñ–¥–ø–æ–≤—ñ–¥—å: ${correct}`; }
  else { res.className = 'task-result wrong'; res.textContent = '‚úó –ù–µ–≤—ñ—Ä–Ω–æ. –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑.'; }
}

document.addEventListener('keydown', e => { if (e.key === 'Escape') closeDrawer(); });

const QUIZ_ALL = [
  { topic: 'electricity',
    q: '–ù–∞–ø—Ä—É–≥–∞ –≤ –∫–æ–ª—ñ U = 24 –í, –æ–ø—ñ—Ä R = 6 –û–º. –ß–æ–º—É –¥–æ—Ä—ñ–≤–Ω—é—î —Å–∏–ª–∞ —Å—Ç—Ä—É–º—É I?',
    options: ['2 –ê', '4 –ê', '6 –ê', '144 –ê'],
    correct: 1, explain: '–ó–∞ –∑–∞–∫–æ–Ω–æ–º –û–º–∞: I = U / R = 24 / 6 = 4 –ê' },
  { topic: 'electricity',
    q: '–û–ø—ñ—Ä —Ä–µ–∑–∏—Å—Ç–æ—Ä–∞ R = 8 –û–º, —Å—Ç—Ä—É–º I = 0.5 –ê. –Ø–∫–∞ –Ω–∞–ø—Ä—É–≥–∞ –Ω–∞ –Ω—å–æ–º—É?',
    options: ['16 –í', '4 –í', '8 –í', '0.0625 –í'],
    correct: 1, explain: '–ó–∞ –∑–∞–∫–æ–Ω–æ–º –û–º–∞: U = I ¬∑ R = 0.5 ¬∑ 8 = 4 –í' },
  { topic: 'kirchhoff',
    q: '–©–æ —Å—Ç–≤–µ—Ä–¥–∂—É—î –ø–µ—Ä—à–∏–π –∑–∞–∫–æ–Ω –ö—ñ—Ä—Ö–≥–æ—Ñ–∞?',
    options: ['–°—É–º–∞ –Ω–∞–ø—Ä—É–≥ —É –∫–æ–Ω—Ç—É—Ä—ñ = 0', '–°—É–º–∞ —Å—Ç—Ä—É–º—ñ–≤ —É –≤—É–∑–ª—ñ = 0', '–û–ø—ñ—Ä –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∏', 'P = U ¬∑ I'],
    correct: 1, explain: '–ü–µ—Ä—à–∏–π –∑–∞–∫–æ–Ω –ö—ñ—Ä—Ö–≥–æ—Ñ–∞ ‚Äî –≤—É–∑–ª–æ–≤–∏–π: Œ£I = 0' },
  { topic: 'kirchhoff',
    q: '–£ –≤—É–∑–æ–ª –≤—Ö–æ–¥—è—Ç—å I‚ÇÅ = 2 –ê —Ç–∞ I‚ÇÇ = 7 –ê. –Ø–∫–∏–π —Å—Ç—Ä—É–º –≤–∏—Ö–æ–¥–∏—Ç—å?',
    options: ['5 –ê', '14 –ê', '9 –ê', '4 –ê'],
    correct: 2, explain: '–ó–∞ –ø–µ—Ä—à–∏–º –∑–∞–∫–æ–Ω–æ–º –ö—ñ—Ä—Ö–≥–æ—Ñ–∞: I‚ÇÉ = I‚ÇÅ + I‚ÇÇ = 2 + 7 = 9 –ê' },
  { topic: 'power',
    q: '–ß–µ—Ä–µ–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä R = 5 –û–º –ø—Ä–æ—Ç—ñ–∫–∞—î —Å—Ç—Ä—É–º I = 3 –ê. –Ø–∫–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å?',
    options: ['8 –í—Ç', '15 –í—Ç', '45 –í—Ç', '25 –í—Ç'],
    correct: 2, explain: 'P = I¬≤ ¬∑ R = 9 ¬∑ 5 = 45 –í—Ç' },
  { topic: 'power',
    q: '–ù–∞–ø—Ä—É–≥–∞ U = 10 –í, —Å—Ç—Ä—É–º I = 2 –ê. –Ø–∫–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å?',
    options: ['5 –í—Ç', '12 –í—Ç', '20 –í—Ç', '8 –í—Ç'],
    correct: 2, explain: 'P = U ¬∑ I = 10 ¬∑ 2 = 20 –í—Ç' },
  { topic: 'logic',
    q: '–ù–∞ AND-–≤–µ–Ω—Ç–∏–ª—å –ø–æ–¥–∞–Ω–æ A = 1, B = 1. –©–æ –Ω–∞ –≤–∏—Ö–æ–¥—ñ?',
    options: ['0', '1', '–ù–µ–≤–∏–∑–Ω–∞—á–µ–Ω–æ', '–ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –Ω–∞–ø—Ä—É–≥–∏'],
    correct: 1, explain: 'AND –¥–∞—î 1 —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –æ–±–∏–¥–≤–∞ –≤—Ö–æ–¥–∏ = 1. –¢—É—Ç 1¬∑1 = 1' },
  { topic: 'logic',
    q: '–ù–∞ OR-–≤–µ–Ω—Ç–∏–ª—å –ø–æ–¥–∞–Ω–æ A = 0, B = 1. –©–æ –Ω–∞ –≤–∏—Ö–æ–¥—ñ?',
    options: ['0', '1', '–ü–æ–º–∏–ª–∫–∞', '0.5'],
    correct: 1, explain: 'OR –¥–∞—î 1 —è–∫—â–æ —Ö–æ—á–∞ –± –æ–¥–∏–Ω –≤—Ö—ñ–¥ = 1. –¢—É—Ç 0+1 = 1' },
  { topic: 'logic',
    q: 'RS-—Ç—Ä–∏–≥–µ—Ä —É —Å—Ç–∞–Ω—ñ Q = 1. –ü–æ–¥–∞—î–º–æ R = 1, S = 0. –ù–æ–≤–∏–π —Å—Ç–∞–Ω Q?',
    options: ['Q = 1 (–Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è)', 'Q = 0 (—Å–∫–∏–¥–∞—î—Ç—å—Å—è)', 'Q = –Ω–µ–≤–∏–∑–Ω–∞—á–µ–Ω–æ', 'Q = 2'],
    correct: 1, explain: 'R = Reset —Å–∫–∏–¥–∞—î —Ç—Ä–∏–≥–µ—Ä —É 0. –ù–æ–≤–∏–π —Å—Ç–∞–Ω Q = 0' }
];

let QUIZ = [];
const userAnswers = [];
let submitted = false;

function showQuiz() {
  closeDrawer(true);
  document.getElementById('modal-overlay').classList.add('show');
  document.getElementById('topic-modal').classList.add('show');
}

function closeModal() {
  document.getElementById('modal-overlay').classList.remove('show');
  document.getElementById('topic-modal').classList.remove('show');
}

function startQuiz(topic) {
  closeModal();
  QUIZ = topic === 'all' ? [...QUIZ_ALL] : QUIZ_ALL.filter(q => q.topic === topic);
  userAnswers.length = 0;
  for (let i = 0; i < QUIZ.length; i++) userAnswers.push(null);
  submitted = false;
  document.getElementById('quiz-submit').textContent = '–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ ‚Üí';
  document.getElementById('quiz-submit').onclick = submitQuiz;
  document.getElementById('quiz-submit').disabled = false;
  document.getElementById('quiz-score').textContent = '';
  document.querySelector('.slide').style.display = 'none';
  document.getElementById('quiz-screen').classList.add('active');
  renderQuiz();
}

function showMain() {
  document.querySelector('.slide').style.display = 'flex';
  document.getElementById('quiz-screen').classList.remove('active');
}

function renderQuiz() {
  const body = document.getElementById('quiz-body');
  body.innerHTML = QUIZ.map((q, qi) => `
    <div class="quiz-card" id="qcard-${qi}">
      <div class="quiz-num">–ü–∏—Ç–∞–Ω–Ω—è ${qi + 1} –∑ ${QUIZ.length}</div>
      <div class="quiz-question">${q.q}</div>
      <div class="quiz-options">
        ${q.options.map((opt, oi) => `
          <button class="quiz-option" id="qopt-${qi}-${oi}" onclick="selectOption(${qi}, ${oi})">
            <span class="quiz-option-key">${String.fromCharCode(65 + oi)}</span>
            ${opt}
          </button>
        `).join('')}
      </div>
      <div class="quiz-result-banner" id="qres-${qi}"></div>
    </div>
  `).join('');
}

function selectOption(qi, oi) {
  if (submitted) return;
  userAnswers[qi] = oi;
  QUIZ[qi].options.forEach((_, i) => {
    const btn = document.getElementById(`qopt-${qi}-${i}`);
    btn.classList.toggle('selected', i === oi);
  });
}

function submitQuiz() {
  const unanswered = userAnswers.filter(a => a === null).length;
  if (unanswered > 0) {
    document.getElementById('quiz-score').textContent = `‚ö† –î–∞–π –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –≤—Å—ñ –ø–∏—Ç–∞–Ω–Ω—è (${unanswered} –∑–∞–ª–∏—à–∏–ª–æ—Å—å)`;
    return;
  }
  submitted = true;
  let correct = 0;
  QUIZ.forEach((q, qi) => {
    const chosen = userAnswers[qi];
    const isCorrect = chosen === q.correct;
    if (isCorrect) correct++;

    q.options.forEach((_, oi) => {
      const btn = document.getElementById(`qopt-${qi}-${oi}`);
      btn.disabled = true;
      btn.classList.remove('selected');
      if (oi === chosen && isCorrect)  btn.classList.add('correct');
      if (oi === chosen && !isCorrect) btn.classList.add('wrong');
      if (oi === q.correct && !isCorrect) btn.classList.add('reveal-correct');
    });

    const res = document.getElementById(`qres-${qi}`);
    if (isCorrect) {
      res.className = 'quiz-result-banner correct';
      res.textContent = `‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ! ${q.explain}`;
    } else {
      res.className = 'quiz-result-banner wrong';
      res.textContent = `‚úó –ù–µ–≤—ñ—Ä–Ω–æ. ${q.explain}`;
    }
  });

  const pct = Math.round(correct / QUIZ.length * 100);
  const emoji = pct === 100 ? 'üèÜ' : pct >= 66 ? 'üëç' : 'üìö';
  document.getElementById('quiz-score').textContent = `${emoji} –†–µ–∑—É–ª—å—Ç–∞—Ç: ${correct} / ${QUIZ.length} (${pct}%)`;
  document.getElementById('quiz-submit').textContent = '–©–µ —Ä–∞–∑';
  document.getElementById('quiz-submit').onclick = resetQuiz;
}

function resetQuiz() {
  submitted = false;
  userAnswers.fill(null);
  document.getElementById('quiz-score').textContent = '';
  document.getElementById('quiz-submit').textContent = '–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Å—ñ ‚Üí';
  document.getElementById('quiz-submit').onclick = submitQuiz;
  renderQuiz();
}

function launchSim() {
  const frame = document.getElementById('phet-frame');
  const iframe = document.getElementById('phet-iframe');
  iframe.src = 'https://phet.colorado.edu/sims/html/circuit-construction-kit-dc-virtual-lab/latest/circuit-construction-kit-dc-virtual-lab_all.html?locale=uk';
  frame.style.opacity = '0';
  frame.style.pointerEvents = 'none';
  setTimeout(() => { frame.style.display = 'none'; }, 500);
}
</script>
</body>
</html>